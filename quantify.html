<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Quantify</title>
    <meta name="viewport" content="width=device-width" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
      integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
      .form-check {
        font-size: 30px;
        text-align: center;
        align-items: center;
      }

      input[type="radio"] {
        width: 30px;
        height: 30px;
      }
    </style>
  </head>
  <body>
    <script>
      window.addEventListener("DOMContentLoaded", (evt) => {
        const dt = new Date();
        const date = dt.getFullYear() + "-" + (dt.getMonth() + 1) + "-" + dt.getDate();
        const time = dt.getHours() + ":" + dt.getMinutes();
        const dateTime = date + "T" + time;
        document.getElementById("date").value = dateTime;
      });

      function send() {
        const form = document.getElementById("quantifyForm");
        const formData = new FormData(form);
        const data = {};
        formData.forEach((value, key) => {
          data[key] = value;
        });

        const alertDiv = document.getElementById("alertDiv");
        const alertMsg = document.getElementById("alertMsg");
        const btn = document.getElementById("btnSubmit");
        btn.setAttribute("disabled", "true");
        const spinner = document.getElementById("btnSpinner");
        spinner.classList.remove("d-none");
        const btnText = document.getElementById("btnText");
        btnText.classList.add("d-none");
        axios({
          method: "post",
          //url: "https://localhost:44331/api/quantify/add",
          url: "https://www.abadel-develop.net/api/quantify/add",
          data: data,
        })
          .then(function (response) {
            // handle success
            alertDiv.classList.remove("hide");
            alertDiv.classList.add("show");
            alertDiv.classList.remove("alert-danger");
            alertDiv.classList.add("alert-success");
            alertMsg.innerHTML = "Quantify added successfully";
            console.log(response);
          })
          .catch(function (error) {
            // handle error
            alertDiv.classList.remove("hide");
            alertDiv.classList.add("show");
            alertDiv.classList.add("alert-danger");
            alertDiv.classList.remove("alert-success");
            alertMsg.innerHTML = "" + error;
            console.log(error);
          })
          .then(function () {
            btn.setAttribute("disabled", "false");
            spinner.classList.add("d-none");
            btnText.classList.remove("d-none");
            // always executed
          });
      }
    </script>
    <div class="container">
      <form class="justify-content-center" id="quantifyForm">
        <h2 class="text-center mt-5">Mental</h2>
        <div class="d-flex justify-content-center mt-3">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="num1" id="num1_1" value="1" checked />
            <label class="form-check-label pl-3" for="num1_1"> 1 </label>
          </div>
          <div class="form-check ml-5">
            <input class="form-check-input" type="radio" name="num1" id="num1_2" value="2" />
            <label class="form-check-label pl-3" for="num1_2"> 2 </label>
          </div>
          <div class="form-check ml-5">
            <input class="form-check-input" type="radio" name="num1" id="num1_3" value="3" />
            <label class="form-check-label pl-3" for="num1_3"> 3 </label>
          </div>
          <div class="form-check ml-5">
            <input class="form-check-input" type="radio" name="num1" id="num1_4" value="4" />
            <label class="form-check-label pl-3" for="num1_4"> 4 </label>
          </div>
          <div class="form-check ml-5">
            <input class="form-check-input" type="radio" name="num1" id="num1_5" value="5" />
            <label class="form-check-label pl-3" for="num1_5"> 5 </label>
          </div>
        </div>
        <div class="form-input">
          <textarea
            type="text"
            class="form-control"
            id="text1"
            name="text1"
            placeholder="Few words about your mood"
          ></textarea>
        </div>
        <h2 class="text-center mt-5">Physical</h2>
        <div class="d-flex mt-3 justify-content-center">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="num2" id="num2_1" value="1" checked />
            <label class="form-check-label pl-3" for="num2_1"> 1 </label>
          </div>
          <div class="form-check ml-5">
            <input class="form-check-input" type="radio" name="num2" id="num2_2" value="2" />
            <label class="form-check-label pl-3" for="num2_2"> 2 </label>
          </div>
          <div class="form-check ml-5">
            <input class="form-check-input" type="radio" name="num2" id="num2_3" value="3" />
            <label class="form-check-label pl-3" for="num2_3"> 3 </label>
          </div>
          <div class="form-check ml-5">
            <input class="form-check-input" type="radio" name="num2" id="num2_4" value="4" />
            <label class="form-check-label pl-3" for="num2_4"> 4 </label>
          </div>
          <div class="form-check ml-5">
            <input class="form-check-input" type="radio" name="num2" id="num2_5" value="5" />
            <label class="form-check-label pl-3" for="num2_5"> 5 </label>
          </div>
        </div>
        <div class="form-input">
          <textarea
            type="text"
            class="form-control"
            id="text2"
            name="text2"
            placeholder="Few words about your physical"
          ></textarea>
        </div>
        <div class="d-flex mt-5">
          <div class="form-input">
            <label class="d-inline" for="text3">Date</label>
            <input type="text" class="form-control d-inline w-75" id="date" name="date" placeholder="Date" />
          </div>
        </div>
        <div class="row mt-5">
          <div class="alert alert-success alert-dismissible fade hide" id="alertDiv" role="alert">
            <p id="alertMsg"></p>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
        </div>
        <div class="row mt-5 justify-content-center">
          <button id="btnSubmit" class="btn btn-primary" type="button" onclick="send()">
            <span class="spinner-border d-none" id="btnSpinner" role="status"></span>
            <span id="btnText">Submit</span>
          </button>
        </div>
      </form>
    </div>
  </body>
</html>
